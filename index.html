<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Primary Meta Tags -->
  <title>CivicPress Manifesto - Open Source Civic Technology Platform</title>
  <meta name="title" content="CivicPress Manifesto - Open Source Civic Technology Platform">
  <meta name="description" content="Read the CivicPress Manifesto â€” our vision for open, transparent, and collaborative civic technology that empowers communities and strengthens democracy.">
  <meta name="keywords" content="civic technology, open source, democracy, transparency, community engagement, civic participation, government technology">
  <meta name="author" content="CivicPress">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://civic-press.org">

  <!-- Open Graph - Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://civic-press.org">
  <meta property="og:title" content="CivicPress Manifesto - Open Source Civic Technology Platform">
  <meta property="og:description" content="Read the CivicPress Manifesto â€” our vision for open, transparent, and collaborative civic technology that empowers communities and strengthens democracy.">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="CivicPress">
  <meta property="og:locale" content="en_US">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://civic-press.org">
  <meta name="twitter:title" content="CivicPress Manifesto - Open Source Civic Technology Platform">
  <meta name="twitter:description" content="Read the CivicPress Manifesto â€” our vision for open, transparent, and collaborative civic technology that empowers communities and strengthens democracy.">
  <meta name="twitter:creator" content="@CivicPress">
  <meta name="twitter:site" content="@CivicPress">

  <!-- Additional SEO -->
  <meta name="theme-color" content="#2563eb">
  <meta name="msapplication-TileColor" content="#2563eb">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "name": "CivicPress Manifesto",
    "headline": "CivicPress Manifesto - Open Source Civic Technology Platform",
    "description": "The CivicPress Manifesto outlines our vision for open, transparent, and collaborative civic technology that empowers communities and strengthens democracy.",
    "url": "https://civic-press.org",
    "author": {
      "@type": "Organization",
      "name": "CivicPress",
      "url": "https://github.com/CivicPress"
    },
    "publisher": {
      "@type": "Organization",
      "name": "CivicPress",
      "url": "https://github.com/CivicPress"
    },
    "inLanguage": "en-US",
    "isPartOf": {
      "@type": "WebSite",
      "name": "CivicPress",
      "url": "https://civic-press.org"
    },
    "mainEntity": {
      "@type": "Article",
      "name": "CivicPress Manifesto",
      "description": "Our vision for open, transparent, and collaborative civic technology that empowers communities and strengthens democracy.",
      "keywords": "civic technology, open source, democracy, transparency, community engagement, civic participation, government technology"
    },
    "datePublished": "2025-01-01",
    "dateModified": "2025-01-01"
  }
  </script>

  <!-- Style -->
  <style>
    :root {
      color-scheme: light dark;
    }
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      line-height: 1.6;
      padding: 2rem;
      max-width: 800px;
      margin-inline: auto;
      background-color: Canvas;
      color: CanvasText;
    }
    main {
      display: block;
    }
    #manifesto {
      text-align: left;
    }
    #manifesto h1, #manifesto h2, #manifesto h3 {
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    #manifesto h1 {
      border-bottom: 2px solid currentColor;
      padding-bottom: 0.5rem;
    }
    #manifesto h2 {
      border-bottom: 1px solid currentColor;
      padding-bottom: 0.3rem;
    }
    #manifesto p {
      margin-bottom: 1rem;
    }
    #manifesto ul, #manifesto ol {
      margin-bottom: 1rem;
      padding-left: 2rem;
    }
    #manifesto li {
      margin-bottom: 0.5rem;
    }
    #manifesto blockquote {
      border-left: 4px solid #2563eb;
      margin: 1rem 0;
      padding-left: 1rem;
      font-style: italic;
    }
    #manifesto code {
      background-color: rgba(100, 100, 100, 0.1);
      padding: 0.2rem 0.4rem;
      border-radius: 3px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    }
    #manifesto pre {
      background-color: rgba(100, 100, 100, 0.05);
      padding: 1rem;
      border-radius: 5px;
      overflow-x: auto;
    }
    #manifesto pre code {
      background: none;
      padding: 0;
    }
    footer {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(100, 100, 100, 0.2);
      text-align: center;
      opacity: 0.7;
    }
    footer small {
      font-size: 0.85rem;
    }
  </style>
</head>

<body>
  <main id="manifesto">
    <!-- SEO-friendly content that search engines can index -->
    <div id="seo-content" style="display: none;">
      <h1>CivicPress Manifesto</h1>
      
      <h2>Our Vision</h2>
      <p>We believe in a future where civic technology serves the public good through transparency, collaboration, and open source principles.</p>
      
      <h2>Core Principles</h2>
      
      <h3>1. Open Source by Default</h3>
      <p>All civic technology should be open source, allowing communities to inspect, modify, and improve the tools that serve them.</p>
      
      <h3>2. Transparency First</h3>
      <p>Government technology must be transparent and auditable. Citizens have the right to understand how decisions are made and how their data is used.</p>
      
      <h3>3. Community-Driven Development</h3>
      <p>Civic technology should be developed with and for communities, not imposed upon them.</p>
      
      <h3>4. Interoperability</h3>
      <p>Systems should be designed to work together, avoiding vendor lock-in and promoting data portability.</p>
      
      <h3>5. Accessibility</h3>
      <p>Civic technology must be accessible to all citizens, regardless of their technical expertise or abilities.</p>
      
      <h2>Our Commitment</h2>
      <p>We commit to building and promoting civic technology that:</p>
      <ul>
        <li>Strengthens democracy</li>
        <li>Empowers communities</li>
        <li>Protects privacy</li>
        <li>Fosters collaboration</li>
        <li>Drives innovation</li>
      </ul>
      
      <p>For the latest version of this manifesto, visit <a href="https://github.com/CivicPress/manifesto/blob/main/manifesto.md">the CivicPress Manifesto on GitHub</a>.</p>
    </div>
    
    <!-- Dynamic content container -->
    <div id="dynamic-content">Loading latest version...</div>
  </main>

  <footer>
    <p><small>Automatically fetched from the <a href="https://github.com/CivicPress/manifesto" target="_blank" rel="noopener noreferrer">CivicPress Manifesto repository</a> on GitHub</small></p>
    <p><small>Open source content â€¢ Available for everyone to read, share, and contribute</small></p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
  <script defer>
    // Local fallback content
    const fallbackContent = `# Unable to Load Manifesto

We're having trouble loading the latest version of the CivicPress Manifesto. This might be due to:

- Network connectivity issues
- GitHub API rate limiting  
- Browser security restrictions

## Read the Manifesto

You can read the latest version directly on GitHub:

ðŸ‘‰ **[View CivicPress Manifesto on GitHub](https://github.com/CivicPress/manifesto/blob/main/manifesto.md)**

## About CivicPress

CivicPress is an open source civic technology platform that promotes transparency, collaboration, and community-driven development in government technology.

For more information, visit [github.com/CivicPress](https://github.com/CivicPress).`;

    // Simple version - load from local file if available
    async function loadManifesto() {
      try {
        // Try to load from local file first (updated by GitHub Actions)
        const res = await fetch('./current-manifesto.md');
        if (res.ok) {
          const content = await res.text();
          document.getElementById('dynamic-content').innerHTML = marked.parse(content);
          console.log('Loaded manifesto from local file');
          return;
        }
      } catch (err) {
        console.warn('Local file not available:', err);
      }
      
      // Fallback to GitHub API if local file doesn't exist
      try {
        const res = await fetch('https://api.github.com/repos/CivicPress/manifesto/contents/manifesto.md?ref=main', {
          headers: {
            'Accept': 'application/vnd.github.v3+json',
            'User-Agent': 'CivicPress-Site'
          }
        });
        
        if (!res.ok) throw new Error(`Fetch failed: ${res.status}`);
        
        const data = await res.json();
        if (data.content && data.encoding === 'base64') {
          const binaryString = atob(data.content);
          const bytes = new Uint8Array(binaryString.length);
          for (let i = 0; i < binaryString.length; i++) {
            bytes[i] = binaryString.charCodeAt(i);
          }
          const raw = new TextDecoder('utf-8').decode(bytes);
          
          // Transform relative links to GitHub URLs
          const transformedContent = raw.replace(
            /\[([^\]]+)\]\(([^)]+)\)/g,
            (match, text, url) => {
              if (!url.startsWith('http')) {
                const githubUrl = `https://github.com/CivicPress/manifesto/blob/main/${url}`;
                return `[${text}](${githubUrl})`;
              }
              return match;
            }
          );
          
          document.getElementById('dynamic-content').innerHTML = marked.parse(transformedContent);
        } else {
          throw new Error('Invalid content format');
        }
      } catch (err) {
        console.warn('Failed to load from GitHub API, using fallback:', err);
        document.getElementById('dynamic-content').innerHTML = marked.parse(fallbackContent);
      }
    }

    loadManifesto();
  </script>
</body>
</html>
